{% extends "layouts/base.html" %}

{% set pageHeaderTitle = title %}
{% set pageHeaderSummary = content %}
{% set postListItems = pagination.items %}


{# If this is a tag, grab those items instead as one large collection #}
{% if tag %}
{% set postListItems = collections[tag] %}
{% set pageHeaderTitle = 'Blog posts filed under “' + tag + '”' %}
{% endif %}


{% block content %}
<article>

  <div class="[ page-header ] [ bg-light-glare ]">
    <div class="[ wrapper ] [ flow ]">
      <h1 class="[ page-header__heading ] [ headline ]" data-highlight="primary">
        {{ pageHeaderTitle }}
      </h1>
      {% if pageHeaderSummary %}
      <div class="[ page-header__summary ] [ measure-long ]">
        {{ pageHeaderSummary | safe }}
      </div>
      {% endif %}
    </div>
  </div>


  <div class="[ dot-shadow panel ] [ bg-secondary-glare ]" id="post-list">
    <div class="[ wrapper ] [ flow flow-space-700 ]">
      {% if postListHeadline %}
      <h2 class="[ headline ] [ measure-micro ]" data-highlight="primary">
        {{ postListHeadline }}
      </h2>
      {% endif %}
      <div>
        <ol class="[ post-list ] [ flow ]">
          {% for item in postListItems %}
          <li class="[ post-list__item ] [ leading-tight measure-long ]">
            <a href="{{ item.url }}" class="post-list__link">{{ item.data.title }}</a>
          </li>
          {% endfor %}
        </ol>
      </div>
    </div>
  </div>
  {# If we leave pagination in for tags, the next and prev links will
  link to tags and be rather confusing, so don't render in that situation #}
  {% if not tag %}
  {% include "partials/pagination.html" %}
  {% endif %}
</article>

{% include "partials/cta.html" %}

{% endblock %}